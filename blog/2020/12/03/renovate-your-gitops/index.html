<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.12.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://mya.sh/blog/2020/12/03/renovate-your-gitops/"><!-- Primary Meta Tags --><title>Renovate your GitOps | Mya Jaye</title><meta name="title" content="Renovate your GitOps | Mya Jaye"><meta name="description" content="Recently, I noticed Renovate submit pull requests for dependencies in my Helm v3 charts.
This gave me an idea.
What if Renovate could automatically manage something like a GitOps repository?
This means organizations would no longer need to tediously query for newer versions of applications.
Instead, they'd automatically receive a pull request when an update becomes available.
In this blog post, I demonstrate how to set this up for an ArgoCD GitOps repository.
"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://mya.sh/blog/2020/12/03/renovate-your-gitops/"><meta property="og:title" content="Renovate your GitOps | Mya Jaye"><meta property="og:description" content="Recently, I noticed Renovate submit pull requests for dependencies in my Helm v3 charts.
This gave me an idea.
What if Renovate could automatically manage something like a GitOps repository?
This means organizations would no longer need to tediously query for newer versions of applications.
Instead, they'd automatically receive a pull request when an update becomes available.
In this blog post, I demonstrate how to set this up for an ArgoCD GitOps repository.
"><meta property="og:image" content="https://mya.sh/img/blog-placeholder-2.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://mya.sh/blog/2020/12/03/renovate-your-gitops/"><meta property="twitter:title" content="Renovate your GitOps | Mya Jaye"><meta property="twitter:description" content="Recently, I noticed Renovate submit pull requests for dependencies in my Helm v3 charts.
This gave me an idea.
What if Renovate could automatically manage something like a GitOps repository?
This means organizations would no longer need to tediously query for newer versions of applications.
Instead, they'd automatically receive a pull request when an update becomes available.
In this blog post, I demonstrate how to set this up for an ArgoCD GitOps repository.
"><meta property="twitter:image" content="https://mya.sh/img/blog-placeholder-2.jpg"><script>
!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
posthog.init(
    'phc_iVreaMYf7AssmtgSwxMZy4UP6pWqGY5PDvqWFhbHi5j',
    {
        api_host:'https://us.i.posthog.com',
        person_profiles: 'identified_only'
    }
)
</script><link rel="stylesheet" href="/_astro/_slug_.ycWYyYyU.css">
<style>main[data-astro-cid-bvzihdzo]{width:960px;max-width:calc(100% - 2em);margin:0 auto}div[data-astro-cid-bvzihdzo].prose{width:800px;max-width:calc(100% - 2em);margin:2em auto 0;color:var(--color-text)}.hero-image[data-astro-cid-bvzihdzo]{margin-top:30px;width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.title[data-astro-cid-bvzihdzo]{margin:2em 0 1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:var(--color-text)}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}footer[data-astro-cid-bvzihdzo]{padding:2em 1em 6em;color:var(--color-text);text-align:center}.light-dark[data-astro-cid-bvzihdzo]{position:fixed;top:0;left:0;padding:10px}
</style></head> <body data-astro-cid-bvzihdzo> <div class="light-dark" data-astro-cid-bvzihdzo> <div class="theme-switch-wrapper"> <label class="theme-switch" for="checkbox"> <input type="checkbox" id="checkbox"> <div class="slider"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#FCD53F" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#FCD53F" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path> </svg> </div> </label> <script type="module">const t=document.querySelector('.theme-switch input[type="checkbox"]'),e=localStorage.getItem("theme");e&&(document.documentElement.setAttribute("data-theme",e),e==="dark"&&(t.checked=!0));function m(c){c.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}t.addEventListener("change",m,!1);</script> </div> </div> <main data-astro-cid-bvzihdzo> <div class="social-links" data-astro-cid-yxtifmrq> <a href="https://linktr.ee/MsMyaJaye" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>Linktree</span> <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M7.953 15.066c-.08.163-.08.324-.08.486.08.517.528.897 1.052.89h1.294v4.776c0 .486-.404.89-.89.89H6.577a.898.898 0 0 1-.889-.891v-4.774H.992c-.728 0-1.214-.729-.89-1.377l6.96-12.627a1.065 1.065 0 0 1 1.863 0l2.913 5.585-3.885 7.042zm15.945 0-6.96-12.627a1.065 1.065 0 0 0-1.862 0l-2.995 5.586 3.885 7.04c.081.164.081.326.081.487-.08.517-.529.897-1.052.89h-1.296v4.776c.005.49.4.887.89.89h2.914a.9.9 0 0 0 .892-.89v-4.775h4.612c.73 0 1.214-.729.89-1.377z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://github.com/mjpitz" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>GitHub</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://www.linkedin.com/in/mjpitz/" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>LinkedIn</span> <svg viewBox="0 0 50 50" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M17,20v19h-6V20H17z M11,14.47c0-1.4,1.2-2.47,3-2.47s2.93,1.07,3,2.47c0,1.4-1.12,2.53-3,2.53C12.2,17,11,15.87,11,14.47z M39,39h-6c0,0,0-9.26,0-10 c0-2-1-4-3.5-4.04h-0.08C27,24.96,26,27.02,26,29c0,0.91,0,10,0,10h-6V20h6v2.56c0,0,1.93-2.56,5.81-2.56 c3.97,0,7.19,2.73,7.19,8.26V39z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://bsky.app/profile/mya.sh" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>BlueSky</span> <svg viewBox="0 0 24 24" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565C.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479c.815 2.736 3.713 3.66 6.383 3.364c.136-.02.275-.039.415-.056c-.138.022-.276.04-.415.056c-3.912.58-7.387 2.005-2.83 7.078c5.013 5.19 6.87-1.113 7.823-4.308c.953 3.195 2.05 9.271 7.733 4.308c4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056c2.67.297 5.568-.628 6.383-3.364c.246-.828.624-5.79.624-6.478c0-.69-.139-1.861-.902-2.206c-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://youtube.com/@MsMyaJaye/" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>YouTube</span> <svg viewBox="0 0 310 310" width="32" height="32" data-astro-cid-yxtifmrq> <g data-astro-cid-yxtifmrq> <path fill="currentColor" d="M297.917,64.645c-11.19-13.302-31.85-18.728-71.306-18.728H83.386c-40.359,0-61.369,5.776-72.517,19.938   C0,79.663,0,100.008,0,128.166v53.669c0,54.551,12.896,82.248,83.386,82.248h143.226c34.216,0,53.176-4.788,65.442-16.527   C304.633,235.518,310,215.863,310,181.835v-53.669C310,98.471,309.159,78.006,297.917,64.645z M199.021,162.41l-65.038,33.991   c-1.454,0.76-3.044,1.137-4.632,1.137c-1.798,0-3.592-0.484-5.181-1.446c-2.992-1.813-4.819-5.056-4.819-8.554v-67.764   c0-3.492,1.822-6.732,4.808-8.546c2.987-1.814,6.702-1.938,9.801-0.328l65.038,33.772c3.309,1.718,5.387,5.134,5.392,8.861   C204.394,157.263,202.325,160.684,199.021,162.41z" data-astro-cid-yxtifmrq></path> </g> </svg> </a> <a href="/rss.xml" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>RSS</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M1,5v2c1.081,0,2.128,0.211,3.113,0.628c0.952,0.403,1.808,0.98,2.543,1.715s1.312,1.591,1.715,2.543 C8.789,12.872,9,13.919,9,15h2C11,9.477,6.523,5,1,5z M4,10c-1.105,0-2,0.895-2,2s0.895,2,2,2s2-0.895,2-2S5.105,10,4,10z M1,1v2 c1.621,0,3.192,0.317,4.67,0.942c1.429,0.604,2.712,1.47,3.815,2.573c1.103,1.103,1.968,2.386,2.573,3.815 C12.683,11.808,13,13.379,13,15h2C15,7.268,8.732,1,1,1z" data-astro-cid-yxtifmrq></path> </svg> </a> </div>  <nav data-astro-cid-pux6a34n> <div class="internal-links" data-astro-cid-pux6a34n> <a href="/" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> About </a>  <a href="/blog" class="active" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> Blog </a>  <a href="/charts" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> Charts </a>  <a href="/media" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> Media </a>  <a href="/collab" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> Collaborate </a>  <a href="/ai" data-astro-cid-pux6a34n="true" data-astro-cid-eimmu3lg> AI </a>  </div> </nav>  <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="title" data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>Renovate your GitOps</h1>  <div class="date" data-astro-cid-bvzihdzo> <time datetime="2020-12-03T00:00:00.000Z"> Dec 3, 2020 </time>  </div> <br data-astro-cid-bvzihdzo> <hr data-astro-cid-bvzihdzo> </div> <div class="prose" data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo>  <p>Every engineering organization struggles to stay up to date with the latest versions of applications they run. When an
organization deploys an open source project, their versions start to drift from day one. The longer a project runs
without an update, the more likely it is to contain a vulnerability. To help applications stay on top of library
versions, the project <a href="https://github.com/renovatebot/">Renovate</a> was developed. Renovate works by parsing manifest files (like <code>package.json</code> and
<code>go.mod</code>) and checking for newer versions of libraries. When Renovate discovers an update, it submits a pull request
with the newer version to the project.</p>
<p>Recently, I noticed Renovate submit pull requests for dependencies in my <a href="https://helm.sh/">Helm</a> v3 charts. This gave me an idea. What
if Renovate could automatically manage something like a GitOps repository? This means organizations would no longer need
to tediously query for newer versions of applications. Instead, they’d automatically receive a pull request when an
update becomes available. In this blog post, I demonstrate how to set this up for an <a href="https://github.com/argoproj/argo-cd/">ArgoCD</a> GitOps repository.</p>
<!--more-->
<h2 id="what-is-gitops">What is GitOps?</h2>
<p><a href="https://www.weave.works/blog/what-is-gitops-really">GitOps</a> is the process of managing infrastructure using <code>git</code> and pull requests. It enables developers to manage
their infrastructure and applications with a declarative source of truth. Because workloads must be declared, it
provides transparency around what versions of applications are running.</p>
<p>Recently, GitOps has become more popular within the <a href="https://kubernetes.io">Kubernetes</a> community. We’ve seen new tooling like FluxCD,
ArgoCD, and GitOps toolkit. While it has solved many problems for organizations, it’s also led to some challenges. As
our ability to deploy and manage software has become easier, we’ve also increased the number of things we need to
manage. Staying on top of all the recent versions of these systems can sometimes feel like a full time job.</p>
<h2 id="why-argocd">Why ArgoCD?</h2>
<p>ArgoCD is an incubating project in the <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a> (CNCF). It enables declarative delivery of
workloads to Kubernetes through GitOps. One of the nice things about ArgoCDs <a href="https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications">Application</a> model is that it lets you
point at Helm charts stored in git. This is convenient because Renovate can identify these charts and manage the
versions of dependencies within them.</p>
<p>As a result, we have an automated cycle that self-manages. ArgoCD will roll out any changes whenever someone merges
something into your default branch (<code>HEAD</code>). Renovate will periodically open pull requests with newer versions of
dependent applications as they become available. Once an engineer merges that pull request, the changes propagate out
via ArgoCD.</p>
<h2 id="here-we-go">Here we go!</h2>
<p>Before setting up a project, here are a few things you’ll need:</p>
<ul>
<li>Some version control system (VCS) like GitHub, GitLab, and BitBucket. I’m using GitHub, but you can download a zip and
pull it into your VCS of choice. For simplicity, this repository should be public. This makes the ArgoCD side of the
world a bit easier.</li>
<li>A <strong>personal access token</strong> to your VCS for Renovate to use.</li>
<li><a href="https://www.docker.com/">Docker</a> - A popular container runtime.</li>
<li><a href="https://kind.sigs.k8s.io/">kind</a> - We will be spinning up a cluster in docker for this demonstration.</li>
<li>Helm v3 - Used to perform the initial deployment of ArgoCD.</li>
</ul>
<p>To help reduce the setup, I created a template on GitHub. You can either fork the template, or use it to create your own
project and follow along.</p>
<p><a href="https://github.com/mjpitz/auto-gitops-demo">https://github.com/mjpitz/auto-gitops-demo</a></p>
<p>With your newly created project, you’ll need to replace references to the source. You can find these references by
executing <code>git grep</code> within the project root.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">## replace with your project</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> clone</span><span style="color:#9ECBFF"> https://github.com/mjpitz/renovate-gitops.git</span></span>
<span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> renovate-gitops</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> grep</span><span style="color:#9ECBFF"> "mjpitz/renovate-gitops"</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> grep</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> README.md</span></span></code></pre>
<p><strong>Note:</strong> If you’re not using GitHub, you’ll need to change your platform in Renovate’s configuration.</p>
<p>Once replaced, be sure to commit and push your changes. ArgoCD deploys code from the remote repository, not from your
local copy.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> commit</span><span style="color:#79B8FF"> -a</span><span style="color:#79B8FF"> -m</span><span style="color:#9ECBFF"> "replace references"</span></span>
<span class="line"><span style="color:#B392F0">git</span><span style="color:#9ECBFF"> push</span></span></code></pre>
<p>Next, we’ll deploy a local kind cluster.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kind</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> cluster</span><span style="color:#79B8FF"> --name</span><span style="color:#9ECBFF"> demo</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> config</span><span style="color:#9ECBFF"> use-context</span><span style="color:#9ECBFF"> kind-demo</span></span></code></pre>
<p>At this point, you’ll want to give kind a minute or two to initialize. Kind runs the control plane components inside the
cluster, so it takes a minute for things to come up. You can watch the pods come up in the <code>kube-system</code> namespace. Once
initialized, we can deploy ArgoCD.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> apply</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> namespaces/argocd.yaml</span></span>
<span class="line"><span style="color:#B392F0">helm</span><span style="color:#9ECBFF"> dependency</span><span style="color:#9ECBFF"> update</span><span style="color:#9ECBFF"> workloads/argocd/</span></span>
<span class="line"><span style="color:#B392F0">helm</span><span style="color:#9ECBFF"> upgrade</span><span style="color:#79B8FF"> -i</span><span style="color:#9ECBFF"> argocd</span><span style="color:#9ECBFF"> ./workloads/argocd/</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> argocd</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> rollout</span><span style="color:#9ECBFF"> status</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> argocd</span><span style="color:#9ECBFF"> deployment/argocd-server</span><span style="color:#79B8FF"> -w</span></span></code></pre>
<p>The last command above will hang until the <code>argocd-server</code> has successfully been deployed. Once released, you can try
logging into ArgoCD using <code>admin</code> for the username and <code>password</code> for the password. To do this, you’ll need to forward
the port for the service before opening <code>localhost:8080</code> in the browser.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> port-forward</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> argocd</span><span style="color:#9ECBFF"> svc/argocd-server</span><span style="color:#9ECBFF"> 8080:80</span></span></code></pre>
<p>Next, we’re going to create a root ArgoCD Application named <code>applications</code>. This is used to bootstrap all the other
applications running in the cluster. In the end, there should be a total of 5 applications (<code>applications</code>, <code>argocd</code>,
<code>cert-manager</code>, <code>namespaces</code>, <code>renovate</code>).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> apply</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> applications.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">watch</span><span style="color:#9ECBFF"> kubectl</span><span style="color:#9ECBFF"> get</span><span style="color:#9ECBFF"> applications</span><span style="color:#79B8FF"> -A</span></span></code></pre>
<p>Once all five applications are there, you should be able to watch the pods come up. You can do this either in the ArgoCD
UI (from earlier) or by getting pods for all namespaces.</p>
<p>In order for Renovate to run, it needs a secret. The secret should contain any sensitive configuration for renovate. For
GitHub or GitLab, you just need to provide an access token (<code>RENOVATE_TOKEN</code>). For BitBucket, you will also need to
include a username (<code>RENOVATE_USERNAME</code>).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> secret</span><span style="color:#9ECBFF"> generic</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">    -n</span><span style="color:#9ECBFF"> renovate</span><span style="color:#9ECBFF"> renovate-secrets</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">    --from-literal</span><span style="color:#9ECBFF"> RENOVATE_TOKEN=access_token</span></span></code></pre>
<p>Now, we just need to kick off a job for Renovate.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> create</span><span style="color:#9ECBFF"> job</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> renovate</span><span style="color:#79B8FF"> --from</span><span style="color:#9ECBFF"> cronjob/renovate</span><span style="color:#9ECBFF"> renovate-</span><span style="color:#E1E4E8">$(</span><span style="color:#B392F0">date</span><span style="color:#9ECBFF"> +%s</span><span style="color:#E1E4E8">)</span></span></code></pre>
<p>When the job completes, you should wind up with a few pull requests. You can see some examples under the
<a href="https://github.com/mjpitz/auto-gitops-demo/pulls">pull requests</a> tab.</p>
<p><img src="/img/2020-12-03-renovate-gitops.png" alt="screenshot"></p>
<p>Once we merge one of these pull requests, ArgoCD will kick off a deployment. It might take a minute or two for ArgoCD to
realize there are changes. If time is of the essence, you can always go into the UI and force refresh the application.
In production deployments, you might consider configuring a hook that runs a sync in your CI job.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Together, these technologies reduce the burden of running software yourself. It can free up time for your developers,
allowing them to focus on valuable work for your company. With proper testing, you can configure Renovate to
automatically merge changes if they pass your checks.</p>
<p>I’ve been using this configuration for my projects, and it’s been working out great. I hope others find this as useful
as I have. Enjoy!</p>  </article> </div> </main> <footer data-astro-cid-bvzihdzo> <p data-astro-cid-bvzihdzo>&copy; 2025&nbsp;Mya Jaye. All rights reserved.</p> <div class="social-links" data-astro-cid-yxtifmrq> <a href="https://linktr.ee/MsMyaJaye" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>Linktree</span> <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M7.953 15.066c-.08.163-.08.324-.08.486.08.517.528.897 1.052.89h1.294v4.776c0 .486-.404.89-.89.89H6.577a.898.898 0 0 1-.889-.891v-4.774H.992c-.728 0-1.214-.729-.89-1.377l6.96-12.627a1.065 1.065 0 0 1 1.863 0l2.913 5.585-3.885 7.042zm15.945 0-6.96-12.627a1.065 1.065 0 0 0-1.862 0l-2.995 5.586 3.885 7.04c.081.164.081.326.081.487-.08.517-.529.897-1.052.89h-1.296v4.776c.005.49.4.887.89.89h2.914a.9.9 0 0 0 .892-.89v-4.775h4.612c.73 0 1.214-.729.89-1.377z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://github.com/mjpitz" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>GitHub</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://www.linkedin.com/in/mjpitz/" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>LinkedIn</span> <svg viewBox="0 0 50 50" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M17,20v19h-6V20H17z M11,14.47c0-1.4,1.2-2.47,3-2.47s2.93,1.07,3,2.47c0,1.4-1.12,2.53-3,2.53C12.2,17,11,15.87,11,14.47z M39,39h-6c0,0,0-9.26,0-10 c0-2-1-4-3.5-4.04h-0.08C27,24.96,26,27.02,26,29c0,0.91,0,10,0,10h-6V20h6v2.56c0,0,1.93-2.56,5.81-2.56 c3.97,0,7.19,2.73,7.19,8.26V39z" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://bsky.app/profile/mya.sh" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>BlueSky</span> <svg viewBox="0 0 24 24" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565C.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479c.815 2.736 3.713 3.66 6.383 3.364c.136-.02.275-.039.415-.056c-.138.022-.276.04-.415.056c-3.912.58-7.387 2.005-2.83 7.078c5.013 5.19 6.87-1.113 7.823-4.308c.953 3.195 2.05 9.271 7.733 4.308c4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056c2.67.297 5.568-.628 6.383-3.364c.246-.828.624-5.79.624-6.478c0-.69-.139-1.861-.902-2.206c-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8" data-astro-cid-yxtifmrq></path> </svg> </a> <a href="https://youtube.com/@MsMyaJaye/" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>YouTube</span> <svg viewBox="0 0 310 310" width="32" height="32" data-astro-cid-yxtifmrq> <g data-astro-cid-yxtifmrq> <path fill="currentColor" d="M297.917,64.645c-11.19-13.302-31.85-18.728-71.306-18.728H83.386c-40.359,0-61.369,5.776-72.517,19.938   C0,79.663,0,100.008,0,128.166v53.669c0,54.551,12.896,82.248,83.386,82.248h143.226c34.216,0,53.176-4.788,65.442-16.527   C304.633,235.518,310,215.863,310,181.835v-53.669C310,98.471,309.159,78.006,297.917,64.645z M199.021,162.41l-65.038,33.991   c-1.454,0.76-3.044,1.137-4.632,1.137c-1.798,0-3.592-0.484-5.181-1.446c-2.992-1.813-4.819-5.056-4.819-8.554v-67.764   c0-3.492,1.822-6.732,4.808-8.546c2.987-1.814,6.702-1.938,9.801-0.328l65.038,33.772c3.309,1.718,5.387,5.134,5.392,8.861   C204.394,157.263,202.325,160.684,199.021,162.41z" data-astro-cid-yxtifmrq></path> </g> </svg> </a> <a href="/rss.xml" target="_blank" data-astro-cid-yxtifmrq> <span class="sr-only" data-astro-cid-yxtifmrq>RSS</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-yxtifmrq> <path fill="currentColor" d="M1,5v2c1.081,0,2.128,0.211,3.113,0.628c0.952,0.403,1.808,0.98,2.543,1.715s1.312,1.591,1.715,2.543 C8.789,12.872,9,13.919,9,15h2C11,9.477,6.523,5,1,5z M4,10c-1.105,0-2,0.895-2,2s0.895,2,2,2s2-0.895,2-2S5.105,10,4,10z M1,1v2 c1.621,0,3.192,0.317,4.67,0.942c1.429,0.604,2.712,1.47,3.815,2.573c1.103,1.103,1.968,2.386,2.573,3.815 C12.683,11.808,13,13.379,13,15h2C15,7.268,8.732,1,1,1z" data-astro-cid-yxtifmrq></path> </svg> </a> </div>  </footer> </body></html>